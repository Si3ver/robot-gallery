{"version":3,"sources":["components/AddToCart.tsx","AppState.tsx","components/Robot.tsx","components/RobotDiscount.tsx","components/ShoppingCart.tsx","assets/images/logo.svg","App.tsx","reportWebVitals.ts","index.tsx","App.module.css","components/Robot.module.css","components/ShoppingCart.module.css"],"names":["ChildComponent","defaultContextValue","username","shoppingCart","items","appContext","React","createContext","appSetStateContext","undefined","AppStateProvider","props","useState","state","setState","Provider","value","children","withAddToCart","id","name","email","addToCart","useContext","className","styles","cardContainer","src","alt","onClick","prevState","RobotDiscount","useAddToCart","ShoppingCart","handleClick","e","target","nodeName","isOpen","Consumer","cartContainer","button","length","cartDropDown","style","display","map","item","Component","App","robotGallery","setRobotGallery","loading","setLoading","errMsg","setErrMsg","useEffect","a","fetch","response","json","data","message","fetchData","app","appHeader","appLogo","logo","robotList","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.82d17135.chunk.js","sourcesContent":["import React, { useContext } from \"react\";\nimport { appSetStateContext } from \"../AppState\";\nimport { RobotProps } from \"./Robot\";\n\n// 自定义HOC\nexport const withAddToCart = (\n  ChildComponent: React.ComponentType<RobotProps>\n) => {\n  return (props) => {\n    const setState = useContext(appSetStateContext);\n\n    const addToCart = (id, name) => {\n      if (setState) {\n        setState((prevState) => {\n          return {\n            ...prevState,\n            shoppingCart: {\n              items: [...prevState.shoppingCart.items, { id, name }],\n            },\n          };\n        });\n      }\n    };\n\n    return <ChildComponent {...props} addToCart={addToCart} />;\n  };\n};\n\n// 自定义Hook\nexport const useAddToCart = () => {\n  const setState = useContext(appSetStateContext);\n  const addToCart = (id, name) => {\n    if (setState) {\n      setState((prevState) => {\n        return {\n          ...prevState,\n          shoppingCart: {\n            items: [...prevState.shoppingCart.items, { id, name }],\n          },\n        };\n      });\n    }\n  };\n\n  return addToCart;\n};\n","import React, { useState } from \"react\";\n\ninterface AppStateValue {\n  username: string;\n  shoppingCart: { items: { id: number; name: string }[] };\n}\n\nconst defaultContextValue: AppStateValue = {\n  username: \"威廉·汤姆森\",\n  shoppingCart: { items: [] },\n};\n\nexport const appContext = React.createContext(defaultContextValue);\nexport const appSetStateContext =\n  React.createContext<\n    React.Dispatch<React.SetStateAction<AppStateValue>> | undefined\n  >(undefined);\n\nexport const AppStateProvider: React.FC = (props) => {\n  const [state, setState] = useState(defaultContextValue);\n\n  return (\n    <appContext.Provider value={state}>\n      <appSetStateContext.Provider value={setState}>\n        {props.children}\n      </appSetStateContext.Provider>\n    </appContext.Provider>\n  );\n};\n","import React, { useContext } from \"react\";\nimport { appContext } from \"../AppState\";\nimport { withAddToCart } from \"./AddToCart\";\nimport styles from \"./Robot.module.css\";\n\nexport interface RobotProps {\n  id: number;\n  name: string;\n  email: string;\n  addToCart: (id, name) => void;\n}\n\nconst Robot: React.FC<RobotProps> = ({ id, name, email, addToCart }) => {\n  const value = useContext(appContext);\n\n  return (\n    <div className={styles.cardContainer}>\n      <img src={`https://robohash.org/${id}`} alt=\"robot\" />\n      <h2>{name}</h2>\n      <p>{email}</p>\n      <p>作者：{value.username}</p>\n      <button\n        onClick={() => {\n          addToCart(id, name);\n        }}\n      >\n        加入购物车\n      </button>\n    </div>\n  );\n};\n\nexport default withAddToCart(Robot);\n","import React, { useContext } from \"react\";\nimport { appContext } from \"../AppState\";\nimport { useAddToCart } from \"./AddToCart\";\nimport styles from \"./Robot.module.css\";\n\ninterface RobotDiscountProps {\n  id: number;\n  name: string;\n  email: string;\n}\n\nconst RobotDiscount: React.FC<RobotDiscountProps> = ({ id, name, email }) => {\n  const value = useContext(appContext);\n  const addToCart = useAddToCart();\n\n  return (\n    <div className={styles.cardContainer}>\n      <img src={`https://robohash.org/${id}`} alt=\"robot\" />\n      <h2>打折商品</h2>\n      <h2>{name}</h2>\n      <p>{email}</p>\n      <p>作者：{value.username}</p>\n      <button\n        onClick={() => {\n          addToCart(id, name);\n        }}\n      >\n        加入购物车\n      </button>\n    </div>\n  );\n};\n\nexport default RobotDiscount;\n","import React, { Component } from \"react\";\nimport { appContext } from \"../AppState\";\nimport { FiShoppingCart } from \"react-icons/fi\";\nimport styles from \"./ShoppingCart.module.css\";\n\ninterface Props {}\n\ninterface State {\n  isOpen: boolean;\n}\n\nexport default class ShoppingCart extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      isOpen: false,\n    };\n  }\n\n  handleClick = (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n    if ((e.target as HTMLElement).nodeName === \"SPAN\") {\n      this.setState({ isOpen: !this.state.isOpen });\n    }\n  };\n\n  render() {\n    return (\n      <appContext.Consumer>\n        {(value) => {\n          const { items } = value.shoppingCart;\n\n          return (\n            <div className={styles.cartContainer}>\n              <button className={styles.button} onClick={this.handleClick}>\n                <FiShoppingCart />\n                <span>购物车 {items.length} (件)</span>\n              </button>\n              <div\n                className={styles.cartDropDown}\n                style={{\n                  display: this.state.isOpen ? \"block\" : \"none\",\n                }}\n              >\n                <ul>\n                  {items.map((item) => (\n                    <li key={item.id}>{item.name}</li>\n                  ))}\n                </ul>\n              </div>\n            </div>\n          );\n        }}\n      </appContext.Consumer>\n    );\n  }\n}\n","export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import React, { useState, useEffect } from \"react\";\nimport Robot from \"./components/Robot\";\nimport RobotDiscount from \"./components/RobotDiscount\";\nimport ShoppingCart from \"./components/ShoppingCart\";\nimport logo from \"./assets/images/logo.svg\";\nimport styles from \"./App.module.css\";\n\nconst App: React.FC = (props) => {\n  const [robotGallery, setRobotGallery] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [errMsg, setErrMsg] = useState(\"\");\n\n  useEffect(() => {\n    const fetchData = async () => {\n      setLoading(true);\n      try {\n        const response = await fetch(\n          \"https://jsonplaceholder.typicode.com/users\"\n        );\n        const data = await response.json();\n        setRobotGallery(data);\n      } catch (error) {\n        setErrMsg(error.message);\n      }\n      setLoading(false);\n    };\n    fetchData();\n  }, []);\n\n  return (\n    <div className={styles.app}>\n      <div className={styles.appHeader}>\n        <img className={styles.appLogo} src={logo} alt=\"logo\" />\n        <h1>老铁，买个🤖️给小朋友玩不？</h1>\n      </div>\n      <ShoppingCart />\n      {errMsg !== \"\" && <div>出错了{errMsg}</div>}\n      {loading ? (\n        <div>loading...</div>\n      ) : (\n        <div className={styles.robotList}>\n          {robotGallery.map(({ id, name, email }) =>\n            id & 1 ? (\n              <Robot key={id} id={id} name={name} email={email} />\n            ) : (\n              <RobotDiscount key={id} id={id} name={name} email={email} />\n            )\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { AppStateProvider } from \"./AppState\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <AppStateProvider>\n      <App />\n    </AppStateProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__1kX79\",\"appHeader\":\"App_appHeader__28RXF\",\"appLogo\":\"App_appLogo__1qg7-\",\"App-logo-spin\":\"App_App-logo-spin__1e7sv\",\"robotList\":\"App_robotList__zTHhD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cardContainer\":\"Robot_cardContainer__19gp-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cartContainer\":\"ShoppingCart_cartContainer__1Gl09\",\"cartDropDown\":\"ShoppingCart_cartDropDown__23j9i\",\"button\":\"ShoppingCart_button__3vzc4\"};"],"sourceRoot":""}